# c-like-sourcecode-prettify

这个仓库看起来是一个针对类C语言的简单编译器前端实现，主要包含词法分析（扫描器）和语法分析（解析器）功能，用于处理类C源代码并生成结构化的语法树。以下是其主要组成和功能介绍：


### 1. 核心功能目标
实现对类C语言代码的词法分析（将源代码转换为 token 流）和语法分析（将 token 流转换为语法树），为后续的代码处理（如美化、分析等）提供基础。


### 2. 主要文件及组件
#### （1）词法分析器（Scanner）
- **相关文件**：`msc.h`、`msc.cpp`、`mdefs.h`
- **功能**：  
  将输入的类C源代码字符流转换为一系列 token（标记），包括关键字（如`int`、`if`）、运算符（如`+`、`==`）、字面量（如整数、字符串）、标识符（如变量名）等。  
  - `mdefs.h` 定义了 `Token` 枚举（所有可能的 token 类型）和 `tokenName` 数组（token 对应的字符串名称）。  
  - `msc.cpp` 中的 `sc` 函数是核心，通过 `readToken` 函数逐个解析字符，生成 token 并存储在 `SCRes` 结构体中（包含符号表、token 列表等信息）。


#### （2）语法分析器（Parser）
- **相关文件**：`mpa.h`、`mpa.cpp`
- **功能**：  
  基于词法分析生成的 token 流，按照类C语言的语法规则构建语法树（AST）。  
  - `mpa.h` 定义了 `Node` 结构体（语法树节点）和 `NodeType` 枚举（节点类型，如函数定义、表达式、循环语句等），以及一系列解析函数（如 `parseFuncDef` 解析函数定义、`parseExpr` 解析表达式）。  
  - `mpa.cpp` 实现了解析逻辑，通过递归下降法解析不同语法结构（如表达式、语句、函数等），并将解析结果组织为语法树。


#### （3）测试相关
- **测试文件**：  
  - 词法分析测试：`msctest.cpp`（读取输入并打印 token 信息）。  
  - 语法分析测试：`mpatest.cpp`（读取输入，生成语法树并打印树结构）。  
  - 测试输入输出：`mpatestIn.txt`、`mpatestIn2.txt`（测试用的类C代码）、`mpatestOut.txt`（语法树输出结果）。  
- **编译脚本**：`make_mpa.sh` 用于编译语法分析测试程序。


#### （4）其他辅助文件
- `testcase.c`：一个示例类C代码（如斐波那契函数、主函数），用于测试分析功能。  
- `calc.cpp`：包含一个简单的计算器词法分析相关函数（可能是早期实验代码）。  
- `mfmt.cpp`：包含语法树节点的打印函数（如 `printFac` 用于打印因子表达式），可能用于代码美化（与仓库名“prettify”呼应）。  


### 3. 整体工作流程
1. 词法分析：通过 `msc.cpp` 的 `sc` 函数读取源代码，生成 token 流和符号表，存储在 `SCRes` 中。  
2. 语法分析：`mpa.cpp` 的解析函数（如 `parseSrc`）基于 token 流构建语法树，节点类型对应不同的语法结构。  
3. 测试验证：通过测试程序（如 `mpatest.cpp`）加载测试输入，执行分析并输出结果（如语法树结构），验证分析器的正确性。


总结来说，这个仓库是一个类C语言编译器前端的基础实现，聚焦于词法和语法分析，可用于学习编译器构造的基本原理，或作为简单代码分析/美化工具的基础。
